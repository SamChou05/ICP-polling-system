import { IDL } from '@dfinity/candid';
import { EncodeVisitor } from 'azle/src/lib/candid/serde/visitors/encode_visitor';
import { DecodeVisitor } from 'azle/src/lib/candid/serde/visitors/decode_visitor';
import { VisitorData, VisitorResult } from 'azle/src/lib/candid/serde/visitors/types';

export function visitTuple(
    visitor: DecodeVisitor | EncodeVisitor,
    components: IDL.Type<any>[],
    data: VisitorData
): VisitorResult {
    const fields = components.map((value, index) =>
        value.accept(visitor, {
            js_data: data.js_data[index],
            candidType: data.candidType.innerTypes[index]
        })
    );
    return [...fields];
}
